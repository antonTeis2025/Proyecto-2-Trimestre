<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Carga Masiva de Usuarios</title>
    <style>
        .alert { padding: 15px; margin-bottom: 20px; border: 1px solid transparent; border-radius: 4px; }
        .alert-success { color: #3c763d; background-color: #dff0d8; border-color: #d6e9c6; }
        .alert-danger { color: #a94442; background-color: #f2dede; border-color: #ebccd1; }
        .alert-info { color: #31708f; background-color: #d9edf7; border-color: #bce8f1; }
        .error-list { margin: 0; padding-left: 20px; }
    </style>
</head>
<body>
<div th:replace="~{layout :: menu}"></div>

<div style="padding: 20px; max-width: 800px; margin: 0 auto;">
    <h2>Carga Masiva de Usuarios (CSV)</h2>

    <div th:if="${mensajeExito}" class="alert alert-success">
        <strong th:text="${mensajeExito}"></strong>
    </div>

    <div th:if="${mensajeInfo}" class="alert alert-info" th:text="${mensajeInfo}"></div>

    <div th:if="${errorGlobal}" class="alert alert-danger" th:text="${errorGlobal}"></div>

    <div th:if="${listaErrores != null and !listaErrores.isEmpty()}" class="alert alert-danger">
        <strong>Se encontraron los siguientes errores:</strong>
        <ul class="error-list">
            <li th:each="err : ${listaErrores}" th:text="${err}"></li>
        </ul>
    </div>

    <hr>

    <form method="post" th:action="@{/web/administrador/cargar-usuarios}" enctype="multipart/form-data">

        <div style="margin-bottom: 15px;">
            <label for="file" style="font-weight: bold;">Selecciona el archivo CSV:</label><br>
            <input type="file" id="file" name="file" accept=".csv" required style="margin-top: 5px;" />
        </div>

        <button type="submit" style="padding: 10px 20px; cursor: pointer; background-color: #007bff; color: white; border: none; border-radius: 4px;">
            Subir y Procesar
        </button>
    </form>

    <br>
    <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px;">
        <h4>Instrucciones:</h4>
        <p>El archivo debe ser un CSV separado por comas (<code>,</code>) con el siguiente orden:</p>
        <pre>username,password,nombre,apellido,rol</pre>
        <p>Ejemplo:</p>
        <code>juanp,1234,Juan,Perez,usuario</code><br>
        <code>admin1,adminpass,Admin,Sistema,administrador</code>
    </div>
</div>

<div th:replace="~{layout :: footer}"></div>
</body>
</html>